<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Garden</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/bootstrap-slider.css">
    <link rel="stylesheet" href="css/mainStyles.css">

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css">
</head>

<body class="Background_Pyramid" onload="Connect()">
    <div class="navbar_wraper color_layer">
        <!-- will load common navbar with js $().load() method -->
    </div>
    <section class="home_header color_layer">
        <div class="container">
            <!--Main View and Room Select  -->
            <div class="row justify-content-center">


                <div class="col-9 border rounded">
                    <div class="embed-responsive embed-responsive-16by9">
                        <iframe title="Sky View" src="https://obs.ninja/?view=pyramid&bitrate=5000" allowfullscreen class="second-row"
                            ></iframe>
                    </div>
                </div>


                <div class="col-3 border rounded" style="vertical-align: middle;">

                    <div class="embed-responsive embed-responsive-1by1">
                        <iframe title="Chat View" src="https://obs.ninja/?scene=0&room=frank_group5&roombitrate=500"
                            allow="camera;microphone">
                        </iframe>
                    </div>

                    <div class="embed-responsive embed-responsive-4by3">
                        <iframe title="Join Chat" src="https://obs.ninja/?room=frank_group5&view" allow="camera;microphone">
                        </iframe>
                    </div>


                </div>


            </div>


            <!--Controls  -->
            <div class="row justify-content-center" style="padding-top: 2.0%; padding-left: 0%;">

                <div class="col-md-8 border rounded control_wrapper">
                    <h5>Elemental Controls</h5>
                    <div class="col-12 d-table">
                        <div class="d-table-cell" style="text-align: center;">
                            <div>Intensity: </div>
                            <div id="Intensity"> 0.5 </div>
                            <input type="range" min="0.0" max="1.0" value="0.5" class="vertical" step=".01"
                                orient="vertical" id="sliderIntensity">
                        </div>

                        <div class="d-table-cell" style="text-align: center;">
                            <div>Saturation: </div>
                            <div id="Saturation"> 0.5 </div>
                            <input type="range" min="0" max="1.0" value=".5" class="vertical" step=".01"
                                orient="vertical" id="sliderSaturation">
                        </div>


                        <div class="d-table-cell" style="text-align: center;">
                            <div>Opacity: </div>
                            <div id="Opacity"> 1 </div>
                            <input type="range" min="0.0" max="1.0" value="1" class="vertical" step=".01"
                                orient="vertical" id="sliderOpacity">
                        </div>


                        <div class="d-table-cell" style="text-align: center;">
                            <div>Speed: </div>
                            <div id="Speed"> 1 </div>
                            <input type="range" min="0.0" max="10.0" value="1" class="vertical" step=".01"
                                orient="vertical" id="sliderSpeed">
                        </div>


                        <div class="d-table-cell" style="text-align: center;">
                            <div>State: </div>
                            <div id="State"> 1 </div>
                            <input type="range" min="0" max="5" value="1" class="vertical" step="1" orient="vertical"
                                id="sliderState">
                        </div>

                    </div>
                </div>

                <div class="col-md-4 border rounded control_wrapper">
                    <h5>Camera Controls</h5>

                    <div class="col-12 d-table ">

                        <div class="d-table-cell" style="text-align: center;" id="PanBlock">
                            <div>Pan: </div>
                            <div id="Pan"> 0 </div>
                            <input type="range" min="-90" max="90" value="0" step="1" class="vertical" orient="vertical"
                                id="sliderPan">
                        </div>

                        <div class="d-table-cell" style="text-align: center;">
                            <div>Tilt: </div>
                            <div id="Tilt"> 0 </div>
                            <input type="range" min="-45" max="45" value="0" step="1" class="vertical" orient="vertical"
                                id="sliderTilt">
                        </div>

                    </div>
                </div>
            </div>


        </div>



    </section>

    <div class="footer_wraper color_layer">
        <!-- will load common navbar with js $().load() method -->
    </div>

    <script src="dependencies/js/jquery.min.js"></script>
    <script src="dependencies/js/popper.min.js"></script>
    <script src="dependencies/js/bootstrap.min.js"></script>
    <script src="js/bootstrap-slider.js"></script>
    <script src="js/mainFunctions.js"></script>
    <script src="dependencies/js/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <!-- MQTT Websockets Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.1/mqttws31.js" type="text/javascript"></script>

    <script>

        var topic = "sky"

        var sliderPan = document.getElementById("sliderPan");
        var sliderTilt = document.getElementById("sliderTilt");

        var sliderIntensity = document.getElementById("sliderIntensity");
        var sliderSat = document.getElementById("sliderSat");
        var sliderOpacity = document.getElementById("sliderOpacity");
        var sliderSpeed = document.getElementById("sliderSpeed");
        var sliderState = document.getElementById("sliderState");


        sliderPan.oninput = function () {
            document.getElementById("Pan").innerHTML = this.value;
            PublishMessage("Pan/" + String(this.value), topic);
        }
        sliderTilt.oninput = function () {
            PublishMessage("Tilt/" + String(this.value), topic);
            document.getElementById("Tilt").innerHTML = this.value;
        }
        
        sliderIntensity.oninput = function () {
            PublishMessage("Intensity/" + String(this.value), topic);
            document.getElementById("Intensity").innerHTML = this.value;
        }
        sliderSaturation.oninput = function () {
            PublishMessage("Saturation/" + String(this.value), topic);
            document.getElementById("Saturation").innerHTML = this.value;
        }
        sliderOpacity.oninput = function () {
            PublishMessage("Opacity/" + String(this.value), topic);
            document.getElementById("Opacity").innerHTML = this.value;
        }
        sliderSpeed.oninput = function () {
            PublishMessage("Speed/" + String(this.value), topic);
            document.getElementById("Speed").innerHTML = this.value;
        }
        sliderState.oninput = function () {
            PublishMessage("State/" + String(this.value), topic);
            document.getElementById("State").innerHTML = this.value;
        }

    </script>

</body>

</html>